add_newline = false

[character]
# Note the use of Catppuccin color 'maroon'
success_symbol = "[â¯](green)" # ï”
vicmd_symbol = "[\ue62b](green)" # î˜«
error_symbol = "[â¯](red)" # ï‘§

[directory]
style = "red bold"

[package]
disabled = true

[username]
disabled = true

[hostname]
disabled = true

[custom.upstream_behind]
command = '''
# æ£€æŸ¥æ˜¯å¦åœ¨ Git ä»“åº“ä¸­
git rev-parse --git-dir > /dev/null 2>&1 || exit

# æ£€æŸ¥æ˜¯å¦å­˜åœ¨ upstream è¿œç¨‹ä»“åº“
git remote | grep -q "^upstream$" || exit

# è·å–å½“å‰åˆ†æ”¯å
current=$(git rev-parse --abbrev-ref HEAD 2>/dev/null)

# ç¡®å®šä¸Šæ¸¸åˆ†æ”¯ï¼ˆä¼˜å…ˆ mainï¼Œå…¶æ¬¡ masterï¼‰
upstream="upstream/main"
git rev-parse --verify $upstream > /dev/null 2>&1 || upstream="upstream/master"
git rev-parse --verify $upstream > /dev/null 2>&1 || exit

# ä½¿ç”¨ git status çš„æ–¹å¼è·å–å‡†ç¡®çš„é¢†å…ˆ/è½åä¿¡æ¯
# å…ˆç¡®ä¿æœ‰æœ€æ–°çš„è¿œç¨‹ä¿¡æ¯ï¼ˆå¯é€‰ï¼Œä½†æ›´å‡†ç¡®ï¼‰
# git fetch upstream > /dev/null 2>&1

# è·å–å½“å‰åˆ†æ”¯ç›¸å¯¹äºä¸Šæ¸¸åˆ†æ”¯çš„çŠ¶æ€
counts=$(git rev-list --left-right --count $current...$upstream 2>/dev/null)
if [ $? -eq 0 ] && [ -n "$counts" ]; then
    ahead=$(echo $counts | cut -d' ' -f1)
    behind=$(echo $counts | cut -d' ' -f2)
    
    # åªæœ‰çœŸæ­£è½åæ—¶æ‰æ˜¾ç¤ºçº¢ç‚¹
    [ "$behind" -gt 0 ] && echo "ğŸ”´"
fi
'''
when = "git rev-parse --git-dir"
format = "$output"
style = "bold red"
shell = ["bash", "--noprofile", "--norc"]
